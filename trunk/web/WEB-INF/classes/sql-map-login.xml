<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="User">

	<typeAlias alias="user" type="com.imanager.login.domain.User" />
	
	<select id="getUserByLoginId"
		parameterClass="java.util.Map"
		resultClass="user">
		<![CDATA[
			select 	user_id			as userId,
					creator			as creator,
					gmt_created		as gmtCreated,
					modifier		as modifier,
					gmt_modified	as gmtModified,
					is_deleted		as isDeleted,
					login_id		as loginId,
					user_name		as userName,
					password		as password,
					reg_date		as regDate,
					gmt_last_login	as gmtLastLogin
			from user
			where login_id = #loginId# and password = #password#
		]]>
	</select>
	
	<update id="updateLastLoginDate" 
		parameterClass="java.lang.String">
		<![CDATA[
			update	user 
			set 	gmt_last_login		= now()
			where	is_deleted = 'no' and login_id = #loginId#
		]]>
	</update>
	
	<!--
	<insert id="registerUser"
		parameterClass="user">
		<![CDATA[
			insert into user 
				(creator, gmt_create, modifier, gmt_modified, is_deleted, login_id, user_name, reg_date) 
			VALUES 
				(#creator#, now(), #modifier#, now(), #isDeleted#, #loginId#, #userName#, now())
		]]>
	</insert>
	
	<insert id="setupCorporation"
		parameterClass="corporation">
		<![CDATA[
			INSERT INTO DEMO_CORPORATION 
				(CHINESE_NAME, ENGLISH_NAME, NUMBER, COMMENTS, CREATOR, GMT_CREATE, AEP_INSTANCEID) 
			VALUES 
				(#chineseName#, #englishName#, #number#, #comments#, #creator#, now(), #aepInstanceId#)
		]]>
	</insert>
	
	<update id="updateCorporation"
		parameterClass="corporation">
		<![CDATA[
			update	DEMO_CORPORATION
			set		CHINESE_NAME	= #chineseName#,
					ENGLISH_NAME	= #englishName#,
					NUMBER			= #number#,
					COMMENTS		= #comments#,
					CREATOR			= #creator#
			where	CORPORATION_ID = #corporationId#
		]]>
	</update>
	-->

</sqlMap>